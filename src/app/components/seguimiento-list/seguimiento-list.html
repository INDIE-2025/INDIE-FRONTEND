<div class="overlay" (click)="close.emit()"></div>
<div class="panel">
<header>
<h3>{{ tipo==='seguidores' ? 'Seguidores' : 'Seguidos' }} ({{ total }})</h3>
<button class="close" (click)="close.emit()">âœ•</button>
</header>

@if (loading) {
  <div class="loading">Cargando...</div>
}
@if (!loading) {
  <ul class="list">
    @for (u of usuarios; track u.id || u.username || u.emailUsuario) {
      <li class="item">
        <div class="avatar">{{ (u.nombreUsuario?.[0] || u.username?.[0] || 'U') }}</div>
        <div class="info">
          <div class="name">{{ u.nombreUsuario }} {{ u.apellidoUsuario }}</div>
          <div class="username">@{{ u.username || u.emailUsuario }}</div>
        </div>
        <div class="actions">
          @if (esPerfilPropio) {
            <div>
              <button class="btn" (click)="dejarDeSeguir(u)">Dejar de seguir</button>
              <button class="btn btn-danger" (click)="bloquear(u)">Bloquear</button>
            </div>
          }
        </div>
      </li>
    }
  </ul>
}

@if (errorMsg) {
  <small class="error">{{ errorMsg }}</small>
}
</div>