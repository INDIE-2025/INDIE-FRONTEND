<div class="usuarios-seguidos-container">
  <h1 class="section-title">Usuarios Seguidos</h1>

  <div class="search-bar">
    <input
      type="text"
      placeholder="Buscar artistas..."
      (input)="search($event)"
      [value]="searchTerm"
      class="search-input">
      <i class="bi bi-search search-icon"></i>
    </div>

    <!-- Loading state -->
    @if (loading) {
      <div class="loading-spinner">
        <div class="spinner"></div>
        <p>Cargando artistas...</p>
      </div>
    }

    <!-- No results -->
    @if (!loading && filteredArtists.length === 0) {
      <div class="no-results">
        <i class="bi bi-person-slash"></i>
        @if (searchTerm) {
          <p>No se encontraron artistas que coincidan con "<strong>{{searchTerm}}</strong>"</p>
        }
        @if (!searchTerm && followedArtists.length === 0) {
          <p>No sigues a ningún artista aún</p>
        }
      </div>
    }

    <!-- Artist Grid -->
    @if (!loading && filteredArtists.length > 0) {
      <div class="artist-grid">
        @for (artist of filteredArtists; track artist) {
          <div
            class="artist-card"
            [class.unfollowing]="!artist.isFollowing">
            <div class="artist-image" [routerLink]="['/profile', artist.id]">
              <img [src]="artist.image" [alt]="artist.name">
            </div>
            <div class="artist-info">
              <h3 [routerLink]="['/profile', artist.id]">{{artist.name}}</h3>
              <p class="genre">{{artist.genre}}</p>
              <p class="followers">{{artist.followers}} seguidores</p>
              <button
                class="btn follow-button"
                [class.following]="artist.isFollowing"
                (click)="toggleFollow(artist)">
                <i class="bi" [class.bi-person-check-fill]="artist.isFollowing" [class.bi-person-dash]="!artist.isFollowing"></i>
                {{artist.isFollowing ? 'Siguiendo' : 'Dejar de seguir'}}
              </button>
            </div>
          </div>
        }
      </div>
    }
  </div>